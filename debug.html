<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="LearnerEn">
    <title>LearnerEn - æ™ºèƒ½è‹±è¯­å­¦ä¹ å¹³å°</title>
    
    <style>
        :root {
            --primary-color: #007AFF;
            --secondary-color: #5856D6;
            --success-color: #34C759;
            --warning-color: #FF9500;
            --error-color: #FF3B30;
            
            --text-primary: #000000;
            --text-secondary: #3C3C43;
            --text-tertiary: #8E8E93;
            
            --bg-primary: #FFFFFF;
            --bg-secondary: #F2F2F7;
            --bg-tertiary: #FFFFFF;
            --bg-overlay: rgba(0, 0, 0, 0.3);
            
            --separator: #C6C6C8;
            --card-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            
            --font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            --spacing-xs: 4px;
            --spacing-sm: 8px;
            --spacing-md: 16px;
            --spacing-lg: 24px;
            --spacing-xl: 32px;
            
            --radius-sm: 8px;
            --radius-md: 12px;
            --radius-lg: 16px;
            
            --duration-normal: 300ms;
            --easing: cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: var(--font-family);
            background: var(--bg-secondary);
            color: var(--text-primary);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
        }

        /* === åº”ç”¨å¸ƒå±€ === */
        .app-layout {
            display: flex;
            min-height: 100vh;
        }

        /* === å¯¼èˆªä¾§è¾¹æ  === */
        .nav-sidebar {
            width: 280px;
            background: var(--bg-primary);
            border-right: 1px solid var(--separator);
            display: flex;
            flex-direction: column;
            position: relative;
            transition: transform var(--duration-normal) var(--easing);
        }

        .nav-header {
            padding: var(--spacing-lg);
            border-bottom: 1px solid var(--separator);
            text-align: center;
        }

        .nav-logo {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: var(--spacing-sm);
        }

        .nav-subtitle {
            font-size: 14px;
            color: var(--text-secondary);
        }

        .nav-menu {
            flex: 1;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            padding: var(--spacing-md) 0;
        }

        .nav-section {
            margin-bottom: var(--spacing-lg);
        }

        .nav-section-title {
            padding: 0 var(--spacing-lg) var(--spacing-sm);
            font-size: 12px;
            font-weight: 600;
            color: var(--text-tertiary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .nav-item {
            list-style: none;
        }

        .nav-link {
            display: flex;
            align-items: center;
            padding: var(--spacing-sm) var(--spacing-lg);
            color: var(--text-primary);
            text-decoration: none;
            transition: all var(--duration-normal);
            position: relative;
            min-height: 44px;
        }

        .nav-link:hover {
            background: rgba(0, 122, 255, 0.08);
        }

        .nav-link.active {
            background: var(--primary-color);
            color: white;
        }

        .nav-icon {
            width: 20px;
            height: 20px;
            margin-right: var(--spacing-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
        }

        .nav-text {
            flex: 1;
            font-weight: 500;
        }

        .nav-badge {
            background: var(--error-color);
            color: white;
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 10px;
            min-width: 16px;
            text-align: center;
        }

        /* === ä¸»å†…å®¹åŒº === */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            min-width: 0;
        }

        /* === é¡¶éƒ¨æ  === */
        .top-bar {
            background: var(--bg-primary);
            border-bottom: 1px solid var(--separator);
            padding: var(--spacing-md) var(--spacing-lg);
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .page-title {
            font-size: 20px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .top-actions {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
        }

        .search-box {
            position: relative;
            width: 300px;
        }

        .search-input {
            width: 100%;
            padding: var(--spacing-sm) var(--spacing-sm) var(--spacing-sm) 36px;
            border: 1px solid var(--separator);
            border-radius: var(--radius-sm);
            font-size: 14px;
            background: var(--bg-secondary);
            transition: all var(--duration-normal);
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary-color);
            background: white;
        }

        .search-icon {
            position: absolute;
            left: var(--spacing-sm);
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-tertiary);
        }

        .user-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: var(--primary-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            cursor: pointer;
        }

        /* === å†…å®¹æ»šåŠ¨åŒº === */
        .content-scroll {
            flex: 1;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            padding: var(--spacing-lg);
        }

        /* === ä¸»é¡µç½‘æ ¼å¸ƒå±€ === */
        .homepage-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: var(--spacing-lg);
            margin-bottom: var(--spacing-lg);
        }

        /* === å­¦ä¹ è¿›åº¦å¡ç‰‡ === */
        .progress-card {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: white;
            padding: var(--spacing-xl);
            border-radius: var(--radius-lg);
            position: relative;
            overflow: hidden;
        }

        .progress-card::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -20%;
            width: 200px;
            height: 200px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
        }

        .progress-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: var(--spacing-md);
        }

        .progress-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--spacing-lg);
            margin-bottom: var(--spacing-lg);
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .stat-label {
            font-size: 12px;
            opacity: 0.8;
        }

        .progress-bar {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            height: 6px;
            overflow: hidden;
            margin-bottom: var(--spacing-sm);
        }

        .progress-fill {
            background: white;
            height: 100%;
            width: 68%;
            border-radius: 10px;
            transition: width var(--duration-normal);
        }

        .progress-text {
            font-size: 12px;
            opacity: 0.9;
        }

        /* === å¿«é€Ÿæ“ä½œå¡ç‰‡ === */
        .quick-actions {
            background: var(--bg-primary);
            border-radius: var(--radius-lg);
            padding: var(--spacing-lg);
            box-shadow: var(--card-shadow);
        }

        .actions-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: var(--spacing-md);
            color: var(--text-primary);
        }

        .action-button {
            display: flex;
            align-items: center;
            width: 100%;
            padding: var(--spacing-md);
            border: none;
            background: var(--bg-secondary);
            border-radius: var(--radius-sm);
            margin-bottom: var(--spacing-sm);
            font-size: 14px;
            text-align: left;
            cursor: pointer;
            transition: all var(--duration-normal);
        }

        .action-button:hover {
            background: var(--primary-color);
            color: white;
            transform: translateY(-2px);
        }

        .action-icon {
            margin-right: var(--spacing-md);
            width: 20px;
            text-align: center;
        }

        /* === ç‰¹è‰²åŠŸèƒ½åŒºåŸŸ === */
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--spacing-lg);
            margin-bottom: var(--spacing-lg);
        }

        .feature-card {
            background: var(--bg-primary);
            border-radius: var(--radius-lg);
            padding: var(--spacing-lg);
            box-shadow: var(--card-shadow);
            transition: transform var(--duration-normal);
        }

        .feature-card:hover {
            transform: translateY(-4px);
        }

        .feature-header {
            display: flex;
            align-items: center;
            margin-bottom: var(--spacing-md);
        }

        .feature-icon {
            width: 40px;
            height: 40px;
            border-radius: var(--radius-sm);
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: var(--spacing-md);
            font-size: 18px;
        }

        .feature-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .feature-description {
            color: var(--text-secondary);
            font-size: 14px;
            margin-bottom: var(--spacing-md);
            line-height: 1.5;
        }

        .feature-demo {
            background: var(--bg-secondary);
            border-radius: var(--radius-sm);
            padding: var(--spacing-md);
            font-family: monospace;
            font-size: 12px;
            position: relative;
        }

        /* === ç¤ºä¾‹æ–‡æœ¬åŒºåŸŸ === */
        .demo-text {
            line-height: 1.8;
            font-size: 16px;
        }

        .demo-word {
            cursor: pointer;
            padding: 2px 4px;
            border-radius: 4px;
            transition: all var(--duration-normal);
            position: relative;
        }

        .demo-word:hover {
            background: rgba(0, 122, 255, 0.1);
            color: var(--primary-color);
        }

        .demo-word.highlighted {
            background: var(--primary-color);
            color: white;
            animation: pulse 0.5s ease-in-out;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        /* === è¯æ±‡è¡¨å¼¹çª— === */
        .glossary-popup {
            position: fixed;
            background: var(--bg-primary);
            border: 1px solid var(--separator);
            border-radius: var(--radius-lg);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            max-width: 350px;
            min-width: 280px;
            overflow: hidden;
            transform: scale(0.9) translateY(20px);
            opacity: 0;
            transition: all var(--duration-normal) var(--easing);
            pointer-events: none;
        }

        .glossary-popup.show {
            transform: scale(1) translateY(0);
            opacity: 1;
            pointer-events: auto;
        }

        .glossary-header {
            background: var(--bg-secondary);
            padding: var(--spacing-md);
            border-bottom: 1px solid var(--separator);
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
        }

        .word-info h3 {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 4px;
            color: var(--text-primary);
        }

        .word-phonetic {
            font-size: 14px;
            color: var(--text-secondary);
            font-style: italic;
        }

        .close-btn {
            width: 28px;
            height: 28px;
            border: none;
            background: rgba(0, 0, 0, 0.1);
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            color: var(--text-secondary);
            transition: all var(--duration-normal);
        }

        .close-btn:hover {
            background: var(--error-color);
            color: white;
        }

        .glossary-body {
            padding: var(--spacing-md);
            max-height: 300px;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }

        .definition-item {
            margin-bottom: var(--spacing-sm);
            display: flex;
            align-items: flex-start;
        }

        .definition-number {
            background: var(--primary-color);
            color: white;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 600;
            margin-right: var(--spacing-sm);
            flex-shrink: 0;
        }

        .definition-text {
            font-size: 14px;
            color: var(--text-primary);
        }

        /* === ç§»åŠ¨ç«¯é€‚é… === */
        .nav-toggle {
            display: none;
            position: fixed;
            top: var(--spacing-md);
            left: var(--spacing-md);
            width: 44px;
            height: 44px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: var(--radius-sm);
            z-index: 1001;
            cursor: pointer;
            font-size: 18px;
            transition: all var(--duration-normal);
        }

        .nav-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--bg-overlay);
            z-index: 999;
            opacity: 0;
            visibility: hidden;
            transition: all var(--duration-normal);
        }

        .nav-overlay.show {
            opacity: 1;
            visibility: visible;
        }

        @media (max-width: 768px) {
            .app-layout {
                flex-direction: column;
            }

            .nav-sidebar {
                position: fixed;
                top: 0;
                left: 0;
                bottom: 0;
                width: 280px;
                z-index: 1000;
                transform: translateX(-100%);
            }

            .nav-sidebar.open {
                transform: translateX(0);
            }

            .nav-toggle {
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .main-content {
                width: 100%;
                padding-top: 60px;
            }

            .top-bar {
                padding-left: 70px;
            }

            .search-box {
                width: 200px;
            }

            .homepage-grid {
                grid-template-columns: 1fr;
                gap: var(--spacing-md);
            }

            .features-grid {
                grid-template-columns: 1fr;
                gap: var(--spacing-md);
            }

            .content-scroll {
                padding: var(--spacing-md);
            }

            .glossary-popup {
                position: fixed !important;
                top: 50% !important;
                left: 50% !important;
                transform: translate(-50%, -50%) scale(0.9);
                width: calc(100vw - 32px);
                max-width: none;
            }

            .glossary-popup.show {
                transform: translate(-50%, -50%) scale(1);
            }
        }

        /* === iOSå®‰å…¨åŒºåŸŸé€‚é… === */
        @supports (padding: max(0px)) {
            .nav-sidebar {
                padding-top: max(0px, env(safe-area-inset-top));
            }

            .nav-toggle {
                top: max(16px, calc(env(safe-area-inset-top) + 16px));
            }
        }

        /* === åŠ¨ç”»æ•ˆæœ === */
        .fade-in {
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid #f3f3f3;
            border-top: 2px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- ç§»åŠ¨ç«¯å¯¼èˆªåˆ‡æ¢æŒ‰é’® -->
    <button class="nav-toggle" id="nav-toggle">â‰¡</button>
    
    <!-- å¯¼èˆªè¦†ç›–å±‚ -->
    <div class="nav-overlay" id="nav-overlay"></div>

    <div class="app-layout">
        <!-- å¯¼èˆªä¾§è¾¹æ  -->
        <nav class="nav-sidebar" id="nav-sidebar">
            <div class="nav-header">
                <div class="nav-logo">LearnerEn</div>
                <div class="nav-subtitle">æ™ºèƒ½è‹±è¯­å­¦ä¹ å¹³å°</div>
            </div>

            <div class="nav-menu">
                <!-- å­¦ä¹ æ¨¡å— -->
                <div class="nav-section">
                    <div class="nav-section-title">å­¦ä¹ </div>
                    <ul>
                        <li class="nav-item">
                            <a href="#dashboard" class="nav-link active" data-page="dashboard">
                                <div class="nav-icon">ğŸ </div>
                                <div class="nav-text">å­¦ä¹ æ¦‚è§ˆ</div>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#lessons" class="nav-link" data-page="lessons">
                                <div class="nav-icon">ğŸ“š</div>
                                <div class="nav-text">è¯¾ç¨‹å­¦ä¹ </div>
                                <div class="nav-badge">3</div>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#vocabulary" class="nav-link" data-page="vocabulary">
                                <div class="nav-icon">ğŸ“–</div>
                                <div class="nav-text">è¯æ±‡ç»ƒä¹ </div>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#audio-sync" class="nav-link" data-page="audio-sync">
                                <div class="nav-icon">ğŸµ</div>
                                <div class="nav-text">å¬åŠ›åŒæ­¥</div>
                            </a>
                        </li>
                    </ul>
                </div>

                <!-- åˆ†ææ¨¡å— -->
                <div class="nav-section">
                    <div class="nav-section-title">åˆ†æ</div>
                    <ul>
                        <li class="nav-item">
                            <a href="#progress" class="nav-link" data-page="progress">
                                <div class="nav-icon">ğŸ“Š</div>
                                <div class="nav-text">å­¦ä¹ è¿›åº¦</div>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#word-frequency" class="nav-link" data-page="word-frequency">
                                <div class="nav-icon">ğŸ§ </div>
                                <div class="nav-text">è¯é¢‘åˆ†æ</div>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#personalized" class="nav-link" data-page="personalized">
                                <div class="nav-icon">ğŸ¯</div>
                                <div class="nav-text">ä¸ªæ€§åŒ–æ¨è</div>
                            </a>
                        </li>
                    </ul>
                </div>

                <!-- å·¥å…·æ¨¡å— -->
                <div class="nav-section">
                    <div class="nav-section-title">å·¥å…·</div>
                    <ul>
                        <li class="nav-item">
                            <a href="#bookmarks" class="nav-link" data-page="bookmarks">
                                <div class="nav-icon">â­</div>
                                <div class="nav-text">æ”¶è—å¤¹</div>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#settings" class="nav-link" data-page="settings">
                                <div class="nav-icon">âš™ï¸</div>
                                <div class="nav-text">è®¾ç½®</div>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>

        <!-- ä¸»å†…å®¹åŒº -->
        <main class="main-content">
            <!-- é¡¶éƒ¨æ  -->
            <header class="top-bar">
                <h1 class="page-title" id="page-title">å­¦ä¹ æ¦‚è§ˆ</h1>
                <div class="top-actions">
                    <div class="search-box">
                        <input type="text" class="search-input" placeholder="æœç´¢è¯æ±‡ã€è¯¾ç¨‹..." id="global-search">
                        <div class="search-icon">ğŸ”</div>
                    </div>
                    <div class="user-avatar">A</div>
                </div>
            </header>

            <!-- å†…å®¹æ»šåŠ¨åŒº -->
            <div class="content-scroll" id="content-area">
                <!-- ä¸»é¡µå†…å®¹ -->
                <div class="page-content fade-in" id="dashboard-content">
                    <!-- å­¦ä¹ è¿›åº¦å’Œå¿«é€Ÿæ“ä½œ -->
                    <div class="homepage-grid">
                        <!-- å­¦ä¹ è¿›åº¦å¡ç‰‡ -->
                        <div class="progress-card">
                            <h2 class="progress-title">ä»Šæ—¥å­¦ä¹ è¿›åº¦</h2>
                            <div class="progress-stats">
                                <div class="stat-item">
                                    <div class="stat-value" id="words-learned">24</div>
                                    <div class="stat-label">è¯æ±‡æŒæ¡</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-value" id="study-time">45</div>
                                    <div class="stat-label">å­¦ä¹ åˆ†é’Ÿ</div>
                                </div>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="daily-progress"></div>
                            </div>
                            <div class="progress-text">å·²å®Œæˆä»Šæ—¥ç›®æ ‡çš„ 68%</div>
                        </div>

                        <!-- å¿«é€Ÿæ“ä½œ -->
                        <div class="quick-actions">
                            <h3 class="actions-title">å¿«é€Ÿå¼€å§‹</h3>
                            <button class="action-button" data-action="continue-lesson">
                                <div class="action-icon">â–¶ï¸</div>
                                ç»§ç»­ä¸Šæ¬¡è¯¾ç¨‹
                            </button>
                            <button class="action-button" data-action="vocabulary-practice">
                                <div class="action-icon">ğŸ“</div>
                                è¯æ±‡ç»ƒä¹ 
                            </button>
                            <button class="action-button" data-action="listening-practice">
                                <div class="action-icon">ğŸ§</div>
                                å¬åŠ›ç»ƒä¹ 
                            </button>
                            <button class="action-button" data-action="review-mistakes">
                                <div class="action-icon">ğŸ”„</div>
                                å¤ä¹ é”™é¢˜
                            </button>
                        </div>
                    </div>

                    <!-- æ ¸å¿ƒåŠŸèƒ½æ¼”ç¤º -->
                    <div class="features-grid">
                        <!-- æ™ºèƒ½è¯æ±‡è¡¨æ¼”ç¤º -->
                        <div class="feature-card" id="glossary-demo">
                            <div class="feature-header">
                                <div class="feature-icon">ğŸ“–</div>
                                <div class="feature-title">æ™ºèƒ½è¯æ±‡è¡¨</div>
                            </div>
                            <div class="feature-description">
                                ç‚¹å‡»æ–‡æœ¬ä¸­çš„ä»»æ„å•è¯ï¼Œå³å¯æŸ¥çœ‹è¯¦ç»†é‡Šä¹‰ã€éŸ³æ ‡å’Œä¾‹å¥ã€‚æ”¯æŒè§¦æ‘¸ä¼˜åŒ–å’Œä¸ªæ€§åŒ–æ¨èã€‚
                            </div>
                            <div class="feature-demo">
                                <div class="demo-text">
                                    <span class="demo-word" data-word="technology">Technology</span> has 
                                    <span class="demo-word" data-word="revolutionized">revolutionized</span> the way we 
                                    <span class="demo-word" data-word="learn">learn</span> and 
                                    <span class="demo-word" data-word="communicate">communicate</span>.
                                </div>
                            </div>
                        </div>

                        <!-- éŸ³é¢‘åŒæ­¥æ¼”ç¤º -->
                        <div class="feature-card" id="audio-demo">
                            <div class="feature-header">
                                <div class="feature-icon">ğŸµ</div>
                                <div class="feature-title">éŸ³é¢‘å­—å¹•åŒæ­¥</div>
                            </div>
                            <div class="feature-description">
                                SRTå­—å¹•ä¸éŸ³é¢‘å®Œç¾åŒæ­¥ï¼Œå®æ—¶é«˜äº®å½“å‰æ’­æ”¾å†…å®¹ï¼Œæ”¯æŒæ™ºèƒ½æ»šåŠ¨å’Œæ’­æ”¾æ§åˆ¶ã€‚
                            </div>
                            <div class="feature-demo">
                                <audio controls style="width: 100%; margin-bottom: 8px;" id="demo-audio">
                                    <source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhDTGH1O/ITSELLIzX8N15HwwYfM709YlrQwIR" type="audio/wav">
                                </audio>
                                <div class="demo-text" id="audio-text">
                                    <span class="demo-word">Welcome</span> to our 
                                    <span class="demo-word">English</span> learning 
                                    <span class="demo-word">platform</span>.
                                </div>
                            </div>
                        </div>

                        <!-- è¯é¢‘åˆ†ææ¼”ç¤º -->
                        <div class="feature-card" id="wordfreq-demo">
                            <div class="feature-header">
                                <div class="feature-icon">ğŸ§ </div>
                                <div class="feature-title">AIè¯é¢‘åˆ†æ</div>
                            </div>
                            <div class="feature-description">
                                æ™ºèƒ½åˆ†ææ–‡ç« éš¾åº¦ï¼Œæä¾›ä¸ªæ€§åŒ–å­¦ä¹ å»ºè®®ï¼Œå®æ—¶è·Ÿè¸ªå­¦ä¹ è¿›åº¦å’Œè¯æ±‡æŒæ¡æƒ…å†µã€‚
                            </div>
                            <div class="feature-demo">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                    <span>æ–‡ç« éš¾åº¦:</span>
                                    <span style="color: var(--primary-color);">â­â­â­ ä¸­ç­‰</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                    <span>è¯æ±‡è¦†ç›–:</span>
                                    <span style="color: var(--success-color);">85%</span>
                                </div>
                                <div style="display: flex; justify-content: space-between;">
                                    <span>æ¨èå­¦ä¹ :</span>
                                    <span style="color: var(--warning-color);">15åˆ†é’Ÿ</span>
                                </div>
                            </div>
                        </div>

                        <!-- æ€§èƒ½ç›‘æ§æ¼”ç¤º -->
                        <div class="feature-card" id="performance-demo">
                            <div class="feature-header">
                                <div class="feature-icon">âš¡</div>
                                <div class="feature-title">æ€§èƒ½ç›‘æ§</div>
                            </div>
                            <div class="feature-description">
                                å®æ—¶ç›‘æ§åº”ç”¨æ€§èƒ½ï¼Œç¡®ä¿æµç•…çš„å­¦ä¹ ä½“éªŒã€‚åŒ…æ‹¬å¸§ç‡ã€å†…å­˜ä½¿ç”¨å’Œç½‘ç»œçŠ¶æ€ç›‘æ§ã€‚
                            </div>
                            <div class="feature-demo">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                    <span>å¸§ç‡:</span>
                                    <span style="color: var(--success-color);" id="fps-display">60 fps</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                    <span>å†…å­˜:</span>
                                    <span style="color: var(--primary-color);" id="memory-display">24 MB</span>
                                </div>
                                <div style="display: flex; justify-content: space-between;">
                                    <span>ç½‘ç»œ:</span>
                                    <span style="color: var(--success-color);" id="network-display">åœ¨çº¿</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- è¯æ±‡è¡¨å¼¹çª— -->
    <div class="glossary-popup" id="glossary-popup">
        <div class="glossary-header">
            <div class="word-info">
                <h3 id="popup-word">Word</h3>
                <div class="word-phonetic" id="popup-phonetic">/wÉœËrd/</div>
            </div>
            <button class="close-btn" id="close-glossary">Ã—</button>
        </div>
        <div class="glossary-body" id="popup-definitions">
            <div class="definition-item">
                <div class="definition-number">1</div>
                <div class="definition-text">Loading definition...</div>
            </div>
        </div>
    </div>

    <script>
        /**
         * LearnerEnä¸»é¡µæ¼”ç¤ºç±»
         * å±•ç¤ºå„ä¸ªæ¨¡å—çš„é›†æˆä½¿ç”¨æ–¹æ³•
         */
        class LearnerEnHomepage {
            constructor() {
                this.isNavOpen = false;
                this.currentPage = 'dashboard';
                this.glossaryVisible = false;
                this.performanceMonitor = null;
                
                // æ¨¡æ‹Ÿè¯æ±‡æ•°æ®
                this.vocabularyData = {
                    technology: {
                        phonetic: "/tekËˆnÉ’lÉ™dÊ’i/",
                        definitions: [
                            "The application of scientific knowledge for practical purposes",
                            "Advanced electronic and digital equipment"
                        ]
                    },
                    revolutionized: {
                        phonetic: "/ËŒrevÉ™ËˆluËÊƒÉ™naÉªzd/",
                        definitions: [
                            "Changed something completely and fundamentally",
                            "Transformed dramatically"
                        ]
                    },
                    learn: {
                        phonetic: "/lÉœËrn/",
                        definitions: [
                            "Acquire knowledge or skills through study or experience",
                            "Become aware of something through information or observation"
                        ]
                    },
                    communicate: {
                        phonetic: "/kÉ™ËˆmjuËnÉªkeÉªt/",
                        definitions: [
                            "Share or exchange information, ideas, or feelings",
                            "Convey or express thoughts effectively"
                        ]
                    },
                    welcome: {
                        phonetic: "/ËˆwelkÉ™m/",
                        definitions: [
                            "Greet someone in a friendly way",
                            "Receive gladly"
                        ]
                    },
                    english: {
                        phonetic: "/ËˆÉªÅ‹É¡lÉªÊƒ/",
                        definitions: [
                            "The language of England and many other countries",
                            "Relating to England or its people"
                        ]
                    },
                    platform: {
                        phonetic: "/ËˆplÃ¦tfÉ”Ërm/",
                        definitions: [
                            "A digital service or technology framework",
                            "A raised surface or stage"
                        ]
                    }
                };
                
                this.init();
            }

            init() {
                this.bindEvents();
                this.setupDemoFeatures();
                this.startPerformanceMonitoring();
                this.setupMobileOptimizations();
                
                console.log('ğŸš€ LearnerEnä¸»é¡µå·²åˆå§‹åŒ–');
                console.log('ğŸ“‹ ä½¿ç”¨è¯´æ˜:');
                console.log('1. ç‚¹å‡»å·¦ä¾§å¯¼èˆªåˆ‡æ¢é¡µé¢');
                console.log('2. ç‚¹å‡»è¯æ±‡æŸ¥çœ‹å¼¹çª—æ•ˆæœ');
                console.log('3. æ’­æ”¾éŸ³é¢‘æŸ¥çœ‹åŒæ­¥æ•ˆæœ');
                console.log('4. è§‚å¯Ÿå³ä¸‹è§’æ€§èƒ½ç›‘æ§');
            }

            bindEvents() {
                // å¯¼èˆªåˆ‡æ¢
                const navToggle = document.getElementById('nav-toggle');
                const navOverlay = document.getElementById('nav-overlay');
                
                navToggle?.addEventListener('click', () => this.toggleNavigation());
                navOverlay?.addEventListener('click', () => this.closeNavigation());

                // å¯¼èˆªé“¾æ¥
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.addEventListener('click', (e) => {
                        e.preventDefault();
                        const page = link.getAttribute('data-page');
                        this.navigateToPage(page, link);
                    });
                });

                // å¿«é€Ÿæ“ä½œæŒ‰é’®
                document.querySelectorAll('.action-button').forEach(button => {
                    button.addEventListener('click', (e) => {
                        const action = button.getAttribute('data-action');
                        this.handleQuickAction(action, button);
                    });
                });

                // è¯æ±‡è¡¨æ¼”ç¤º
                document.querySelectorAll('.demo-word').forEach(word => {
                    word.addEventListener('click', (e) => {
                        const wordText = word.getAttribute('data-word');
                        this.showGlossary(wordText, word);
                    });
                });

                // å…³é—­è¯æ±‡è¡¨
                const closeBtn = document.getElementById('close-glossary');
                closeBtn?.addEventListener('click', () => this.hideGlossary());

                // å…¨å±€æœç´¢
                const searchInput = document.getElementById('global-search');
                searchInput?.addEventListener('input', (e) => {
                    this.handleGlobalSearch(e.target.value);
                });

                // éŸ³é¢‘æ’­æ”¾æ¼”ç¤º
                const demoAudio = document.getElementById('demo-audio');
                demoAudio?.addEventListener('play', () => this.startAudioSync());
                demoAudio?.addEventListener('pause', () => this.stopAudioSync());

                // ç‚¹å‡»å¤–éƒ¨å…³é—­è¯æ±‡è¡¨
                document.addEventListener('click', (e) => {
                    if (this.glossaryVisible && !e.target.closest('.glossary-popup') && !e.target.closest('.demo-word')) {
                        this.hideGlossary();
                    }
                });
            }

            // === å¯¼èˆªç³»ç»Ÿæ¼”ç¤º (NavigationCoreä½¿ç”¨) ===
            toggleNavigation() {
                const sidebar = document.getElementById('nav-sidebar');
                const overlay = document.getElementById('nav-overlay');
                const toggle = document.getElementById('nav-toggle');

                this.isNavOpen = !this.isNavOpen;

                if (this.isNavOpen) {
                    sidebar?.classList.add('open');
                    overlay?.classList.add('show');
                    if (toggle) toggle.innerHTML = 'Ã—';
                } else {
                    sidebar?.classList.remove('open');
                    overlay?.classList.remove('show');
                    if (toggle) toggle.innerHTML = 'â‰¡';
                }

                // æ¨¡æ‹ŸStateManagerçŠ¶æ€æ›´æ–°
                console.log('ğŸ“¡ StateManager.setState("navigation.isOpen", ' + this.isNavOpen + ')');
                
                // æ¨¡æ‹ŸEventHubäº‹ä»¶å‘é€
                console.log('ğŸšŒ EventHub.emit("navigation:' + (this.isNavOpen ? 'opened' : 'closed') + '")');
            }

            closeNavigation() {
                if (this.isNavOpen) {
                    this.toggleNavigation();
                }
            }

            navigateToPage(page, linkElement) {
                // æ›´æ–°å¯¼èˆªçŠ¶æ€
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.classList.remove('active');
                });
                linkElement.classList.add('active');

                // æ›´æ–°é¡µé¢æ ‡é¢˜
                const pageTitle = document.getElementById('page-title');
                const titles = {
                    dashboard: 'å­¦ä¹ æ¦‚è§ˆ',
                    lessons: 'è¯¾ç¨‹å­¦ä¹ ',
                    vocabulary: 'è¯æ±‡ç»ƒä¹ ',
                    'audio-sync': 'å¬åŠ›åŒæ­¥',
                    progress: 'å­¦ä¹ è¿›åº¦',
                    'word-frequency': 'è¯é¢‘åˆ†æ',
                    personalized: 'ä¸ªæ€§åŒ–æ¨è',
                    bookmarks: 'æ”¶è—å¤¹',
                    settings: 'è®¾ç½®'
                };
                
                if (pageTitle) {
                    pageTitle.textContent = titles[page] || 'å­¦ä¹ æ¦‚è§ˆ';
                }

                this.currentPage = page;

                // ç§»åŠ¨ç«¯è‡ªåŠ¨å…³é—­å¯¼èˆª
                if (window.innerWidth <= 768) {
                    this.closeNavigation();
                }

                // æ¨¡æ‹Ÿé¡µé¢åˆ‡æ¢é€»è¾‘
                console.log('ğŸ§­ NavigationCore.navigateTo("' + page + '")');
                console.log('ğŸ“¡ StateManager.setState("app.currentPage", "' + page + '")');
                console.log('ğŸšŒ EventHub.emit("page:changed", {page: "' + page + '"})');
            }

            // === è¯æ±‡è¡¨ç³»ç»Ÿæ¼”ç¤º (GlossaryCoreä½¿ç”¨) ===
            showGlossary(word, triggerElement) {
                const popup = document.getElementById('glossary-popup');
                const wordElement = document.getElementById('popup-word');
                const phoneticElement = document.getElementById('popup-phonetic');
                const definitionsElement = document.getElementById('popup-definitions');

                // è·å–è¯æ±‡æ•°æ®
                const wordData = this.vocabularyData[word.toLowerCase()];
                
                if (!wordData) {
                    console.warn('âŒ è¯æ±‡æ•°æ®æœªæ‰¾åˆ°:', word);
                    return;
                }

                // æ›´æ–°å†…å®¹
                if (wordElement) wordElement.textContent = word;
                if (phoneticElement) phoneticElement.textContent = wordData.phonetic;
                
                // ç”Ÿæˆå®šä¹‰åˆ—è¡¨
                if (definitionsElement) {
                    definitionsElement.innerHTML = wordData.definitions.map((def, index) => `
                        <div class="definition-item">
                            <div class="definition-number">${index + 1}</div>
                            <div class="definition-text">${def}</div>
                        </div>
                    `).join('');
                }

                // è®¡ç®—ä½ç½®
                this.positionGlossary(popup, triggerElement);

                // æ˜¾ç¤ºå¼¹çª—
                setTimeout(() => {
                    popup?.classList.add('show');
                }, 10);

                this.glossaryVisible = true;

                // æ¨¡æ‹ŸGlossaryCoreçš„APIè°ƒç”¨
                console.log('ğŸ“– GlossaryCore.show("' + word + '", triggerElement)');
                console.log('ğŸ“¡ StateManager.setState("glossary.currentWord", "' + word + '")');
                console.log('ğŸšŒ EventHub.emit("glossary:shown", {word: "' + word + '"})');
            }

            hideGlossary() {
                const popup = document.getElementById('glossary-popup');
                popup?.classList.remove('show');
                this.glossaryVisible = false;

                console.log('ğŸ“– GlossaryCore.hide()');
                console.log('ğŸšŒ EventHub.emit("glossary:hidden")');
            }

            positionGlossary(popup, triggerElement) {
                if (!popup || !triggerElement) return;

                const rect = triggerElement.getBoundingClientRect();
                const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                const scrollLeft = window.pageXOffset || document.documentElement.scrollLeft;

                if (window.innerWidth <= 768) {
                    // ç§»åŠ¨ç«¯å±…ä¸­
                    popup.style.position = 'fixed';
                    popup.style.top = '50%';
                    popup.style.left = '50%';
                    popup.style.transform = 'translate(-50%, -50%) scale(0.9)';
                } else {
                    // æ¡Œé¢ç«¯æ™ºèƒ½å®šä½
                    let top = rect.bottom + scrollTop + 10;
                    let left = rect.left + scrollLeft;

                    // è¾¹ç•Œæ£€æŸ¥
                    if (left + 350 > window.innerWidth) {
                        left = window.innerWidth - 360;
                    }
                    if (top + 300 > window.innerHeight + scrollTop) {
                        top = rect.top + scrollTop - 310;
                    }

                    popup.style.position = 'absolute';
                    popup.style.top = top + 'px';
                    popup.style.left = left + 'px';
                    popup.style.transform = 'scale(0.9)';
                }
            }

            // === éŸ³é¢‘åŒæ­¥æ¼”ç¤º (AudioSyncCoreä½¿ç”¨) ===
            startAudioSync() {
                const audioText = document.getElementById('audio-text');
                const words = audioText?.querySelectorAll('.demo-word');
                
                if (!words || words.length === 0) return;

                let currentIndex = 0;
                
                const highlightNext = () => {
                    // æ¸…é™¤ä¹‹å‰çš„é«˜äº®
                    words.forEach(word => word.classList.remove('highlighted'));
                    
                    // é«˜äº®å½“å‰è¯æ±‡
                    if (currentIndex < words.length) {
                        words[currentIndex].classList.add('highlighted');
                        currentIndex++;
                        
                        // ç»§ç»­ä¸‹ä¸€ä¸ªè¯æ±‡
                        const audio = document.getElementById('demo-audio');
                        if (audio && !audio.paused) {
                            setTimeout(highlightNext, 1000);
                        }
                    }
                };

                highlightNext();

                console.log('ğŸµ AudioSyncCore.play()');
                console.log('ğŸ“¡ StateManager.setState("audio.isPlaying", true)');
                console.log('ğŸšŒ EventHub.emit("audio:play")');
            }

            stopAudioSync() {
                const words = document.querySelectorAll('#audio-text .demo-word');
                words.forEach(word => word.classList.remove('highlighted'));

                console.log('ğŸµ AudioSyncCore.pause()');
                console.log('ğŸ“¡ StateManager.setState("audio.isPlaying", false)');
                console.log('ğŸšŒ EventHub.emit("audio:pause")');
            }

            // === å¿«é€Ÿæ“ä½œå¤„ç† ===
            handleQuickAction(action, button) {
                // æ·»åŠ ç‚¹å‡»æ•ˆæœ
                button.style.transform = 'scale(0.95)';
                setTimeout(() => {
                    button.style.transform = '';
                }, 150);

                const actions = {
                    'continue-lesson': () => {
                        console.log('ğŸš€ ç»§ç»­è¯¾ç¨‹å­¦ä¹ ');
                        this.simulatePageTransition('lessons');
                    },
                    'vocabulary-practice': () => {
                        console.log('ğŸ“ å¼€å§‹è¯æ±‡ç»ƒä¹ ');
                        this.simulatePageTransition('vocabulary');
                    },
                    'listening-practice': () => {
                        console.log('ğŸ§ å¼€å§‹å¬åŠ›ç»ƒä¹ ');
                        this.simulatePageTransition('audio-sync');
                    },
                    'review-mistakes': () => {
                        console.log('ğŸ”„ å¤ä¹ é”™é¢˜');
                        this.simulateProgress();
                    }
                };

                const actionFn = actions[action];
                if (actionFn) {
                    actionFn();
                } else {
                    console.log('ğŸ¯ æ‰§è¡Œæ“ä½œ:', action);
                }
            }

            simulatePageTransition(page) {
                const link = document.querySelector(`[data-page="${page}"]`);
                if (link) {
                    this.navigateToPage(page, link);
                }
            }

            simulateProgress() {
                const progressFill = document.getElementById('daily-progress');
                const wordsLearned = document.getElementById('words-learned');
                const studyTime = document.getElementById('study-time');

                if (progressFill) {
                    const currentWidth = parseInt(progressFill.style.width || '68');
                    const newWidth = Math.min(100, currentWidth + 5);
                    progressFill.style.width = newWidth + '%';
                }

                if (wordsLearned) {
                    const current = parseInt(wordsLearned.textContent);
                    wordsLearned.textContent = current + 1;
                }

                if (studyTime) {
                    const current = parseInt(studyTime.textContent);
                    studyTime.textContent = current + 2;
                }

                console.log('ğŸ“Š WordFrequencyCore.updateProgress()');
                console.log('ğŸ“¡ StateManager.setState("progress.dailyWords", ' + (parseInt(wordsLearned?.textContent) || 0) + ')');
            }

            // === å…¨å±€æœç´¢æ¼”ç¤º ===
            handleGlobalSearch(query) {
                if (query.length < 2) return;

                console.log('ğŸ” å…¨å±€æœç´¢:', query);
                console.log('ğŸ“– GlossaryCore.search("' + query + '")');
                console.log('ğŸ§­ NavigationCore.search("' + query + '")');
                console.log('ğŸ§  WordFrequencyCore.searchWords("' + query + '")');
                
                // æ¨¡æ‹Ÿæœç´¢ç»“æœ
                setTimeout(() => {
                    console.log('âœ… æœç´¢å®Œæˆï¼Œæ‰¾åˆ°ç›¸å…³ç»“æœ');
                }, 300);
            }

            // === æ€§èƒ½ç›‘æ§æ¼”ç¤º (PerformanceUtilsä½¿ç”¨) ===
            startPerformanceMonitoring() {
                const fpsDisplay = document.getElementById('fps-display');
                const memoryDisplay = document.getElementById('memory-display');
                const networkDisplay = document.getElementById('network-display');

                let frameCount = 0;
                let lastTime = performance.now();
                let fps = 60;

                const updatePerformance = (currentTime) => {
                    frameCount++;
                    
                    if (currentTime - lastTime >= 1000) {
                        fps = Math.round((frameCount * 1000) / (currentTime - lastTime));
                        frameCount = 0;
                        lastTime = currentTime;
                        
                        // æ›´æ–°æ˜¾ç¤º
                        if (fpsDisplay) {
                            fpsDisplay.textContent = fps + ' fps';
                            fpsDisplay.style.color = fps >= 50 ? 'var(--success-color)' : 
                                                   fps >= 30 ? 'var(--warning-color)' : 'var(--error-color)';
                        }
                    }
                    
                    requestAnimationFrame(updatePerformance);
                };

                // æ¨¡æ‹Ÿå†…å­˜ä½¿ç”¨
                setInterval(() => {
                    const memory = performance.memory ? 
                        Math.round(performance.memory.usedJSHeapSize / 1024 / 1024) :
                        Math.round(20 + Math.random() * 10);
                    
                    if (memoryDisplay) {
                        memoryDisplay.textContent = memory + ' MB';
                        memoryDisplay.style.color = memory < 50 ? 'var(--success-color)' : 
                                                   memory < 100 ? 'var(--warning-color)' : 'var(--error-color)';
                    }
                }, 2000);

                // ç½‘ç»œçŠ¶æ€
                const updateNetworkStatus = () => {
                    const isOnline = navigator.onLine;
                    if (networkDisplay) {
                        networkDisplay.textContent = isOnline ? 'åœ¨çº¿' : 'ç¦»çº¿';
                        networkDisplay.style.color = isOnline ? 'var(--success-color)' : 'var(--error-color)';
                    }
                };

                window.addEventListener('online', updateNetworkStatus);
                window.addEventListener('offline', updateNetworkStatus);
                updateNetworkStatus();

                requestAnimationFrame(updatePerformance);

                console.log('âš¡ PerformanceUtils.startMonitoring()');
            }

            // === ç§»åŠ¨ç«¯ä¼˜åŒ– (MobileUtilsä½¿ç”¨) ===
            setupMobileOptimizations() {
                // iOSè§†å£ä¿®å¤
                const setVH = () => {
                    const vh = window.innerHeight * 0.01;
                    document.documentElement.style.setProperty('--vh', vh + 'px');
                };

                setVH();
                window.addEventListener('resize', setVH);
                window.addEventListener('orientationchange', setVH);

                // è§¦æ‘¸åé¦ˆ
                document.addEventListener('touchstart', (e) => {
                    if (e.target.closest('.action-button, .demo-word, .nav-link')) {
                        e.target.style.opacity = '0.7';
                    }
                }, {passive: true});

                document.addEventListener('touchend', (e) => {
                    if (e.target.closest('.action-button, .demo-word, .nav-link')) {
                        setTimeout(() => {
                            e.target.style.opacity = '1';
                        }, 150);
                    }
                }, {passive: true});

                // é˜²æ­¢iOSåŒå‡»ç¼©æ”¾
                let lastTouchEnd = 0;
                document.addEventListener('touchend', function (event) {
                    const now = (new Date()).getTime();
                    if (now - lastTouchEnd <= 300) {
                        event.preventDefault();
                    }
                    lastTouchEnd = now;
                }, false);

                console.log('ğŸ“± MobileUtils.setupOptimizations()');
            }
        }

        // åˆå§‹åŒ–åº”ç”¨
        document.addEventListener('DOMContentLoaded', () => {
            new LearnerEnHomepage();
        });

        // æ¨¡æ‹Ÿæ¨¡å—ç³»ç»Ÿçš„å…¨å±€åˆå§‹åŒ–
        console.log('ğŸ”§ æ¨¡å—ç³»ç»Ÿåˆå§‹åŒ–æ¼”ç¤º:');
        console.log('1ï¸âƒ£ Foundation Layer: StateManager, EventHub, CacheManager, ErrorBoundary');
        console.log('2ï¸âƒ£ Core Modules: NavigationCore, GlossaryCore, AudioSyncCore, WordFrequencyCore');
        console.log('3ï¸âƒ£ Utils Layer: MobileUtils, PerformanceUtils, DOMUtils, CompatibilityUtils');
        console.log('4ï¸âƒ£ Application Layer: AppController ç»Ÿä¸€ç®¡ç†');
    </script>
</body>
</html>