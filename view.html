<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>LearnerEn - 英语学习平台</title>
    <style>
        /* iOS Safari 兼容性优化 */
        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin: 0 0 10px 0;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
            margin: 0;
        }
        
        .demo-section {
            background: white;
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 20px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
        }
        
        .demo-section h2 {
            color: #333;
            margin-top: 0;
            font-size: 1.5rem;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
        }
        
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .feature-card {
            background: linear-gradient(45deg, #f8f9ff, #e8eeff);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid #e0e7ff;
            transition: transform 0.2s ease;
        }
        
        .feature-card:hover {
            transform: translateY(-2px);
        }
        
        .feature-card h3 {
            color: #4c51bf;
            margin-top: 0;
            font-size: 1.2rem;
        }
        
        .feature-card p {
            color: #666;
            line-height: 1.6;
            margin-bottom: 15px;
        }
        
        .feature-demo {
            background: #f7fafc;
            border-radius: 8px;
            padding: 15px;
            border-left: 4px solid #667eea;
        }
        
        .code-block {
            background: #1a202c;
            color: #e2e8f0;
            border-radius: 8px;
            padding: 20px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
            line-height: 1.5;
            overflow-x: auto;
            margin: 15px 0;
        }
        
        .highlighted-word {
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            padding: 2px 6px;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .highlighted-word:hover {
            transform: scale(1.05);
            box-shadow: 0 2px 8px rgba(255, 215, 0, 0.4);
        }
        
        .glossary-popup {
            position: absolute;
            background: white;
            border-radius: 12px;
            padding: 16px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.15);
            max-width: 300px;
            border: 1px solid #e0e7ff;
            z-index: 1000;
            transform: scale(0.95);
            opacity: 0;
            transition: all 0.2s ease;
        }
        
        .glossary-popup.show {
            transform: scale(1);
            opacity: 1;
        }
        
        .btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.2s ease;
            margin: 5px;
            min-height: 44px; /* iOS 触摸优化 */
            min-width: 44px;
        }
        
        .btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 16px rgba(102, 126, 234, 0.3);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .audio-controls {
            display: flex;
            align-items: center;
            gap: 15px;
            margin: 20px 0;
        }
        
        .progress-bar {
            flex: 1;
            height: 6px;
            background: #e2e8f0;
            border-radius: 3px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(45deg, #667eea, #764ba2);
            width: 0%;
            transition: width 0.1s ease;
        }
        
        .article-content {
            line-height: 1.8;
            font-size: 1.1rem;
            color: #2d3748;
        }
        
        .highlighted-current {
            background: linear-gradient(45deg, #48bb78, #68d391);
            color: white;
            padding: 2px 4px;
            border-radius: 4px;
            animation: pulse 1s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .stat-item {
            text-align: center;
            padding: 15px;
            background: #f7fafc;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 5px;
        }
        
        .stat-label {
            color: #718096;
            font-size: 0.9rem;
        }
        
        /* 移动端优化 */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .demo-section {
                padding: 16px;
            }
            
            .feature-grid {
                grid-template-columns: 1fr;
            }
            
            .code-block {
                font-size: 12px;
                padding: 15px;
            }
        }
        
        /* iOS 安全区域适配 */
        @supports (padding: max(0px)) {
            .container {
                padding-left: max(20px, env(safe-area-inset-left));
                padding-right: max(20px, env(safe-area-inset-right));
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- 头部标题 -->
        <div class="header">
            <h1>🎓 LearnerEn</h1>
            <p>智能英语学习平台 - iOS Safari 完美兼容</p>
        </div>

        <!-- 核心功能展示 -->
        <div class="demo-section">
            <h2>📚 核心功能演示</h2>
            <div class="feature-grid">
                <!-- 智能词汇表 -->
                <div class="feature-card">
                    <h3>📖 智能词汇表</h3>
                    <p>点击单词查看释义、发音和例句</p>
                    <div class="feature-demo">
                        <p>示例文本：I <span class="highlighted-word" data-word="love">love</span> learning <span class="highlighted-word" data-word="English">English</span> with this <span class="highlighted-word" data-word="platform">platform</span>.</p>
                    </div>
                </div>

                <!-- 音频同步 -->
                <div class="feature-card">
                    <h3>🎵 音频同步高亮</h3>
                    <p>SRT字幕与音频完美同步</p>
                    <div class="feature-demo">
                        <div class="audio-controls">
                            <button class="btn" onclick="toggleAudioDemo()">▶️ 播放演示</button>
                            <div class="progress-bar">
                                <div class="progress-fill" id="progressFill"></div>
                            </div>
                        </div>
                        <div class="article-content" id="demoContent">
                            <span>Hello and welcome to our platform.</span>
                            <span>Today we will learn vocabulary together.</span>
                            <span>This is an amazing learning experience.</span>
                        </div>
                    </div>
                </div>

                <!-- 学习统计 -->
                <div class="feature-card">
                    <h3>📊 学习统计</h3>
                    <p>个性化学习进度追踪</p>
                    <div class="feature-demo">
                        <div class="stats-grid">
                            <div class="stat-item">
                                <div class="stat-value">248</div>
                                <div class="stat-label">已学单词</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value">12</div>
                                <div class="stat-label">完成文章</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value">85%</div>
                                <div class="stat-label">掌握程度</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 响应式导航 -->
                <div class="feature-card">
                    <h3>🧭 智能导航</h3>
                    <p>多层级课程结构，支持搜索</p>
                    <div class="feature-demo">
                        <button class="btn" onclick="showNavDemo()">📚 课程目录</button>
                        <button class="btn" onclick="showSearchDemo()">🔍 搜索功能</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 如何使用 -->
        <div class="demo-section">
            <h2>🚀 如何使用这个系统？</h2>
            
            <h3>📋 方法一：直接部署使用</h3>
            <p>如果你想直接使用这个学习平台：</p>
            <div class="code-block">// 1. 将代码文件放到你的网站目录
// 2. 创建 HTML 页面并引入脚本
&lt;script src="path/to/content-manager.js"&gt;&lt;/script&gt;

// 3. 初始化平台
&lt;script&gt;
// 系统会自动初始化，或者手动调用
initializeLearningPlatform();
&lt;/script&gt;</div>

            <h3>🔧 方法二：集成到现有项目</h3>
            <p>如果你想把这些功能集成到已有的网站：</p>
            <div class="code-block">// 1. 引入需要的模块
var contentManager = new ContentManager({
    // 配置选项
});

// 2. 加载文章内容
contentManager.loadArticle('your-article-id')
    .then(function(articleData) {
        console.log('文章加载成功:', articleData.title);
    });

// 3. 获取学习统计
var stats = contentManager.getLearningStats();
console.log('学习进度:', stats);</div>

            <h3>📱 方法三：移动端 PWA 应用</h3>
            <p>这个系统特别针对 iOS Safari 优化，可以作为 PWA 应用：</p>
            <div class="code-block">// 1. 配置 PWA manifest.json
{
  "name": "LearnerEn",
  "short_name": "LearnerEn",
  "start_url": "/",
  "display": "standalone",
  "theme_color": "#667eea"
}

// 2. 用户可以"添加到主屏幕"
// 3. 支持离线使用，具有原生 App 体验</div>
        </div>

        <!-- 技术架构 -->
        <div class="demo-section">
            <h2>🏗️ 技术架构说明</h2>
            <div class="feature-grid">
                <div class="feature-card">
                    <h3>🎯 应用控制层</h3>
                    <p><strong>AppController</strong> - 统一生命周期管理</p>
                    <p><strong>ContentManager</strong> - 内容和模块协调</p>
                </div>
                <div class="feature-card">
                    <h3>⚙️ 核心业务层</h3>
                    <p><strong>NavigationCore</strong> - 导航系统</p>
                    <p><strong>GlossaryCore</strong> - 词汇表功能</p>
                    <p><strong>AudioSyncCore</strong> - 音频同步</p>
                    <p><strong>WordFrequencyCore</strong> - 词频分析</p>
                </div>
                <div class="feature-card">
                    <h3>🛠️ 基础设施层</h3>
                    <p><strong>StateManager</strong> - 状态管理</p>
                    <p><strong>EventHub</strong> - 事件系统</p>
                    <p><strong>CacheManager</strong> - 缓存管理</p>
                    <p><strong>ErrorBoundary</strong> - 错误处理</p>
                </div>
            </div>
        </div>

        <!-- 开发指南 -->
        <div class="demo-section">
            <h2>💻 开发和定制指南</h2>
            <p>如果你想基于这个系统开发自己的功能：</p>
            
            <h3>1️⃣ 创建新模块</h3>
            <div class="code-block">// 使用标准模块模板
function YourCustomModule(container, options) {
    'use strict';
    
    // 配置和初始化
    var config = mergeOptions(defaultOptions, options);
    var isInitialized = false;
    
    // 依赖注入
    var stateManager = config.stateManager;
    var eventHub = config.eventHub;
    
    // 公开 API
    return {
        init: function() { /* 初始化逻辑 */ },
        yourMethod: function() { /* 功能实现 */ },
        getState: function() { /* 状态获取 */ },
        destroy: function() { /* 清理资源 */ }
    };
}</div>

            <h3>2️⃣ 数据格式标准</h3>
            <div class="code-block">// 文章数据格式
var articleData = {
    id: 'article-id',
    title: '文章标题',
    content: {
        paragraphs: [
            {
                sentences: [
                    { text: '句子内容', startTime: 0, endTime: 3 }
                ]
            }
        ]
    },
    files: {
        audioUrl: '/audio/article.mp3',
        subtitlesUrl: '/subtitles/article.srt'
    },
    vocabulary: {
        keyWords: [
            {
                word: 'example',
                definition: '例子',
                difficulty: 'beginner'
            }
        ]
    }
};</div>

            <h3>3️⃣ iOS 兼容性要点</h3>
            <div class="code-block">// 关键兼容性处理
// 1. 防止输入框缩放
input { font-size: 16px !important; }

// 2. 安全区域适配
padding: env(safe-area-inset-top) env(safe-area-inset-right);

// 3. 触摸滚动优化
-webkit-overflow-scrolling: touch;

// 4. 最小触摸区域
min-height: 44px; min-width: 44px;</div>
        </div>

        <!-- 示例数据 -->
        <div class="demo-section">
            <h2>📄 示例数据和配置</h2>
            <p>系统需要的基本数据结构：</p>
            <button class="btn" onclick="showExampleData()">📊 查看示例数据</button>
            <button class="btn" onclick="showConfigExample()">⚙️ 查看配置示例</button>
        </div>
    </div>

    <!-- 词汇表弹窗 -->
    <div class="glossary-popup" id="glossaryPopup">
        <h4 id="glossaryWord">单词</h4>
        <p id="glossaryDefinition">释义</p>
        <button class="btn" onclick="hideGlossary()">关闭</button>
    </div>

    <script>
        // 词汇表数据
        var glossaryData = {
            'love': {
                word: 'love',
                phonetic: '/lʌv/',
                definition: '爱，喜欢',
                examples: ['I love learning English.']
            },
            'English': {
                word: 'English',
                phonetic: '/ˈɪŋɡlɪʃ/',
                definition: '英语，英国的',
                examples: ['English is a global language.']
            },
            'platform': {
                word: 'platform',
                phonetic: '/ˈplætfɔːrm/',
                definition: '平台，站台',
                examples: ['This learning platform is very useful.']
            }
        };

        // 音频演示
        var audioDemo = {
            isPlaying: false,
            currentIndex: 0,
            sentences: document.querySelectorAll('#demoContent span'),
            interval: null
        };

        // 显示词汇表
        function showGlossary(word, element) {
            var popup = document.getElementById('glossaryPopup');
            var wordData = glossaryData[word];
            
            if (wordData) {
                document.getElementById('glossaryWord').textContent = wordData.word + ' ' + wordData.phonetic;
                document.getElementById('glossaryDefinition').textContent = wordData.definition;
                
                // 定位弹窗
                var rect = element.getBoundingClientRect();
                popup.style.left = rect.left + 'px';
                popup.style.top = (rect.bottom + 10) + 'px';
                popup.classList.add('show');
            }
        }

        // 隐藏词汇表
        function hideGlossary() {
            document.getElementById('glossaryPopup').classList.remove('show');
        }

        // 音频演示切换
        function toggleAudioDemo() {
            if (audioDemo.isPlaying) {
                stopAudioDemo();
            } else {
                startAudioDemo();
            }
        }

        function startAudioDemo() {
            audioDemo.isPlaying = true;
            audioDemo.currentIndex = 0;
            
            // 清除之前的高亮
            audioDemo.sentences.forEach(function(span) {
                span.classList.remove('highlighted-current');
            });
            
            // 开始循环高亮
            audioDemo.interval = setInterval(function() {
                // 清除上一个高亮
                if (audioDemo.currentIndex > 0) {
                    audioDemo.sentences[audioDemo.currentIndex - 1].classList.remove('highlighted-current');
                }
                
                // 设置当前高亮
                if (audioDemo.currentIndex < audioDemo.sentences.length) {
                    audioDemo.sentences[audioDemo.currentIndex].classList.add('highlighted-current');
                    
                    // 更新进度条
                    var progress = ((audioDemo.currentIndex + 1) / audioDemo.sentences.length) * 100;
                    document.getElementById('progressFill').style.width = progress + '%';
                    
                    audioDemo.currentIndex++;
                } else {
                    stopAudioDemo();
                }
            }, 2000);
            
            // 更新按钮文本
            event.target.textContent = '⏸️ 暂停演示';
        }

        function stopAudioDemo() {
            audioDemo.isPlaying = false;
            clearInterval(audioDemo.interval);
            
            // 清除所有高亮
            audioDemo.sentences.forEach(function(span) {
                span.classList.remove('highlighted-current');
            });
            
            // 重置进度条
            document.getElementById('progressFill').style.width = '0%';
            
            // 更新按钮文本
            document.querySelector('.audio-controls button').textContent = '▶️ 播放演示';
        }

        // 导航演示
        function showNavDemo() {
            alert('📚 课程导航演示：\n\n' +
                  '🏠 首页\n' +
                  '├── 📖 基础课程\n' +
                  '│   ├── 第1课：问候语\n' +
                  '│   ├── 第2课：自我介绍\n' +
                  '│   └── 第3课：日常对话\n' +
                  '├── 📚 进阶课程\n' +
                  '│   ├── 商务英语\n' +
                  '│   └── 学术英语\n' +
                  '└── 📊 学习统计');
        }

        function showSearchDemo() {
            var query = prompt('🔍 搜索演示：请输入搜索关键词', 'vocabulary');
            if (query) {
                alert('搜索结果：\n\n' +
                      '找到 ' + Math.floor(Math.random() * 20 + 5) + ' 个相关内容：\n' +
                      '• 词汇学习方法\n' +
                      '• 高频词汇列表\n' +
                      '• 词汇记忆技巧\n' +
                      '• 专业词汇分类');
            }
        }

        // 示例数据展示
        function showExampleData() {
            alert('📊 示例数据结构：\n\n' +
                  '文章数据：包含标题、内容、音频、字幕\n' +
                  '词汇数据：单词、发音、释义、例句\n' +
                  '用户数据：学习进度、偏好设置\n' +
                  '导航数据：课程结构、分类信息\n\n' +
                  '详细格式请参考技术文档');
        }

        function showConfigExample() {
            alert('⚙️ 配置示例：\n\n' +
                  'iOS兼容性：Safari 12+ 支持\n' +
                  '响应式设计：移动端优先\n' +
                  '性能优化：懒加载、缓存策略\n' +
                  '用户体验：触摸优化、动画效果\n\n' +
                  '可根据需求定制配置');
        }

        // 事件监听
        document.addEventListener('DOMContentLoaded', function() {
            // 词汇表点击事件
            document.querySelectorAll('.highlighted-word').forEach(function(element) {
                element.addEventListener('click', function() {
                    var word = this.getAttribute('data-word');
                    showGlossary(word, this);
                });
            });

            // 点击其他地方关闭弹窗
            document.addEventListener('click', function(e) {
                if (!e.target.closest('.highlighted-word') && !e.target.closest('.glossary-popup')) {
                    hideGlossary();
                }
            });

            // iOS 视口高度修复
            function setVH() {
                var vh = window.innerHeight * 0.01;
                document.documentElement.style.setProperty('--vh', vh + 'px');
            }
            
            setVH();
            window.addEventListener('resize', setVH);
            window.addEventListener('orientationchange', setVH);

            console.log('🎓 LearnerEn 演示页面已加载完成！');
            console.log('💡 提示：点击高亮单词查看词汇表功能');
            console.log('🎵 提示：点击播放按钮体验音频同步');
        });
    </script>
</body>
</html>